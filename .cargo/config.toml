# .cargo/config.toml

# RUSTC â€” STRICT CORE SAFETY
[build]
rustflags = [             
  "-Dunsafe_code",                # forbid unsafe code at compile time
  "-Coverflow-checks=yes",        # ensure overflow checks are enabled
  "-Cdebuginfo=2",                # include debuginfo for post-mortem
]

# For nightly-specific testing (miri, sanitizers), target overrides can be placed in CI
[target.'cfg(all())']
rustflags = []

[alias]
# Strict clippy target; call: cargo clippy-strict
clippy-strict = [
  "clippy",
  "--all-targets",
  "--workspace",
  "--",
  "-D",
  "clippy::all",
  "-D",
  "clippy::pedantic",
  "-D",
  "clippy::unwrap_used",
  "-D",
  "clippy::expect_used",
  "-D",
  "clippy::panic",
  "-D",
  "clippy::todo",
  "-D",
  "clippy::unimplemented",
  "-D",
  "clippy::dbg_macro",
  "-D",
  "clippy::indexing_slicing",
  "-D",
  "clippy::arithmetic_side_effects",
  "-D",
  "clippy::integer_division",
  "-D",
  "clippy::float_arithmetic",
]

# Run miri tests (requires nightly + miri component installed)
miri-test = ["+nightly", "miri", "test"]

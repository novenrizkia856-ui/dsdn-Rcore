# Contributing to DSDN

DSDN is an infrastructure project with deterministic architecture and a verifiable-by-design model.  
Contributions must follow the active development direction and must not deviate from the current stage.

---

## Development Philosophy

DSDN is built incrementally and sequentially.

- Do not skip ahead to the next stage.
- Do not work on future features.
- Do not experiment outside the active stage.
- All contributions must be relevant to the current development stage.

The active stage status can be found in:
`/assets/docs/PROGRES.md`

And the stage roadmap is at:
`/assets/docs/roadmap.md`

Every Issue and Pull Request must reference the active stage.

Example:

```
[Stage Active] Implement stake verification in coordinator
```

Pull Requests must include:

```
Stage: Active
Closes #issue_number
```

---

## Approval & Review Policy

All Pull Requests require:

- At least 1 maintainer approval before merge.
- Explicit review for changes in critical modules.

Critical modules:

- `coordinator/`
- `chain/`
- `node/`
- `common/`

Changes to these modules will be reviewed more strictly,
especially regarding determinism, security, and state integrity.

---

## Testing Requirements (Mandatory)

All Pull Requests must include:

- Relevant unit tests.
- Tests must pass without flaky behavior.
- Deterministic logic must be replayable.

PRs without unit tests will be rejected.

If changes touch:
- state reconstruction
- scheduling
- stake validation
- consensus logic

Then tests must cover edge-cases and negative-cases.

---

## AI-Assisted Contributions Policy

DSDN permits the use of AI as a coding aid.

Rules:

1. Contributors remain fully responsible for all submitted code.
2. AI may be used in any form.
3. Code produced by AI must be:
   - Fully understood by the contributor.
   - Audited before submission.
   - Briefly explained in the PR description.

Add the following label to your PR:

```
[AI-Assisted]
```

AI must not be used to:

- Modify deterministic logic without audit.
- Replace cryptographic primitives.
- Add external dependencies without review.

AI is a tool.  
Final decisions rest with humans.

---

## Code Discipline

- All crates must be compiled using `cargo rustsp`.
- Modules with critical logic must use RustS+.
- Use standard Rust for non-critical or utility sections.

Format and linting:

```
cargo rustsp build
cargo clippy
cargo fmt
```

PRs that fail to build will be rejected.

---

## Pull Request Size

Maximum 1000 LOC per PR.

If larger:
- Split into multiple PRs.
- Ensure each PR remains coherent and reviewable.

Goal: maintain review quality and prevent large changes without adequate audit.

---

## Determinism Rule

DSDN relies on deterministic replay.

Prohibited:

- Using randomness without a deterministic seed.
- Using system time directly for consensus logic.
- Using local state as a source of truth.

All state must be reconstructable from available logs.

---

## Dependencies

New dependencies:

- Must include a technical justification.
- Must go through maintainer review.
- Must not introduce non-deterministic behavior.

---

## Security Expectations

Contributors must consider:

- Anti-self-dealing
- Replay attacks
- Signature verification
- State consistency
- Failure recovery

If changes touch any of these areas, explain the security implications in the PR.

---

## Communication

Open an Issue before creating large PRs.

Discuss beforehand if:

- Changing architecture.
- Changing public interfaces.
- Changing cryptographic logic.
- Changing state mechanisms.

---

## Final Responsibility

Every contributor is fully responsible for the code they submit,
including code generated by AI.

DSDN is a long-term project.
Stability and determinism are more important than speed.